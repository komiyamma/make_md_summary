# ç¬¬21ç« ã€€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆâ‘¢ï¼šãƒãƒ³ãƒ‰ãƒ©è¨­è¨ˆï¼ˆå‰¯ä½œç”¨ã¯å¤–ã¸ï¼‰ğŸ“¦ğŸ“©

ãƒŸãƒ‹ECã®ã€Œæ³¨æ–‡ãŒæ”¯æ‰•ã‚ã‚ŒãŸï¼ˆOrderPaidï¼‰ã€ã‚’ä¾‹ã«ã€**â€œèµ·ããŸäº‹å®Ÿâ€ã«åå¿œã—ã¦å‹•ãä»•çµ„ã¿**ã‚’ä½œã‚‹ã‚ˆã€œï¼ğŸ˜Š
ã“ã“ã‹ã‚‰ä¸€æ°—ã«ã€Œæ©Ÿèƒ½è¿½åŠ ãŒãƒ©ã‚¯ã«ãªã‚‹ã€æ„Ÿè¦šãŒå‡ºã¦ãã‚‹ç« ã§ã™ğŸ‰

---

## ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«ğŸ¯âœ¨

* ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆé›†ç´„ï¼‰ã‹ã‚‰ **å‰¯ä½œç”¨ï¼ˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒ»é€šçŸ¥ãƒ»ãƒ­ã‚°ãƒ»å¤–éƒ¨APIï¼‰ã‚’è¿½ã„å‡ºã›ã‚‹**ã‚ˆã†ã«ãªã‚‹ğŸ“¤
* ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã® **ãƒãƒ³ãƒ‰ãƒ©è¨­è¨ˆã®å‹ï¼ˆç½®ãå ´æ‰€ãƒ»è²¬å‹™ãƒ»DIï¼‰**ã‚’è¦šãˆã‚‹ğŸ§©
* ã€ŒåŒã˜ã‚¤ãƒ™ãƒ³ãƒˆã«ã€è¤‡æ•°ã®åå¿œã‚’è¶³ã›ã‚‹ã€çŠ¶æ…‹ã«ã™ã‚‹ï¼ˆç–çµåˆã®å¿«æ„ŸğŸ˜†ï¼‰ğŸŒˆ

---

## ã¾ãšãƒ€ãƒ¡ä¾‹ğŸ˜‡ â†’ è‰¯ã„ä¾‹ğŸ˜

### ãƒ€ãƒ¡ä¾‹ğŸ˜‡ï¼šé›†ç´„ã®ä¸­ã§å‰¯ä½œç”¨ã‚„ã‚Šã¾ãã‚ŠğŸ’¥

ã€Œæ”¯æ‰•ã„å®Œäº†ã—ãŸã‚‰ãƒ¡ãƒ¼ãƒ«é€ã£ã¦ã€ãƒã‚¤ãƒ³ãƒˆä»˜ä¸ã—ã¦ã€Slacké€šçŸ¥ã—ã¦â€¦ã€ã‚’ **Orderã®ä¸­ã§ç›´ã«**ã‚„ã‚‹ã‚„ã¤ã€‚

* ãƒ†ã‚¹ãƒˆãŒåœ°ç„ğŸ˜µï¼ˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ã®ãƒ¢ãƒƒã‚¯ã€å¤–éƒ¨APIã€ãƒ­ã‚°â€¦ï¼‰
* å¤±æ•—æ™‚ã®æ‰±ã„ãŒãã¡ã‚ƒãã¡ã‚ƒï¼ˆDBæ›´æ–°ã¯æˆåŠŸã—ãŸã®ã«ãƒ¡ãƒ¼ãƒ«å¤±æ•—â€¦ã¿ãŸã„ãªã‚ºãƒ¬ï¼‰ğŸ“‰
* æ©Ÿèƒ½è¿½åŠ ã®ãŸã³ã« Order ãŒè‚¥å¤§åŒ–ğŸ”

### è‰¯ã„ä¾‹ğŸ˜ï¼šé›†ç´„ã¯â€œäº‹å®Ÿã‚’å®£è¨€â€ã ã‘ğŸ””âœ¨

é›†ç´„ã¯ã“ã†è¨€ã†ã ã‘ï¼š

> ã€Œæ”¯æ‰•ã„ãŒå®Œäº†ã—ãŸï¼ˆOrderPaidï¼‰ã€ğŸ””

å®Ÿéš›ã«ãƒ¡ãƒ¼ãƒ«ã‚’é€ã‚‹ã®ã¯ã€å¤–ã®ä¸–ç•Œï¼ˆãƒãƒ³ãƒ‰ãƒ©ï¼‰ã«ä»»ã›ã‚‹ğŸ“©â¡ï¸

---

## ãƒãƒ³ãƒ‰ãƒ©è¨­è¨ˆã®åŸºæœ¬ãƒ«ãƒ¼ãƒ«ï¼ˆè¶…å¤§äº‹ï¼‰ğŸ§ ğŸ§©

### ãƒ«ãƒ¼ãƒ«1ï¸âƒ£ï¼š**ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯â€œå‰¯ä½œç”¨ã‚¼ãƒ­â€ãŒç›®æ¨™**ğŸ§¼âœ¨

* ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆDomainï¼‰ã¯ã€Œæ­£ã—ã„çŠ¶æ…‹é·ç§»ã€ã€Œä¸å¤‰æ¡ä»¶ã€ã ã‘å®ˆã‚‹ğŸ’
* ãƒ¡ãƒ¼ãƒ«ãƒ»é€šçŸ¥ãƒ»å¤–éƒ¨APIãƒ»ãƒ­ã‚°ã¯ **ã‚¢ãƒ—ãƒªå±¤/ã‚¤ãƒ³ãƒ•ãƒ©å±¤ã¸**ğŸ“¦

### ãƒ«ãƒ¼ãƒ«2ï¸âƒ£ï¼šãƒãƒ³ãƒ‰ãƒ©ã¯ã€Œåå¿œã—ã¦å¤–ã¸æŠ•ã’ã‚‹ä¿‚ã€ğŸ“©â¡ï¸

ãƒãƒ³ãƒ‰ãƒ©ã®ä»•äº‹ã¯ã ã„ãŸã„ã“ã®3ã¤ï¼š

* é€šçŸ¥ã™ã‚‹ï¼ˆãƒ¡ãƒ¼ãƒ«ã€Pushã€Slackï¼‰ğŸ“£
* è¨˜éŒ²ã™ã‚‹ï¼ˆç›£æŸ»ãƒ­ã‚°ã€åˆ†æã‚¤ãƒ™ãƒ³ãƒˆï¼‰ğŸ“
* â€œæ¬¡ã®ä»•äº‹â€ã‚’ä½œã‚‹ï¼ˆåˆ¥å‡¦ç†ã®ã‚­ãƒƒã‚¯ï¼‰ğŸš€

### ãƒ«ãƒ¼ãƒ«3ï¸âƒ£ï¼š**ãƒãƒ³ãƒ‰ãƒ©ã‹ã‚‰é›†ç´„ã‚’ç›´æ¥ã„ã˜ã‚‰ãªã„**ğŸ™…â€â™€ï¸

ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘ã¦ã€ã¾ãŸåŒã˜é›†ç´„ã‚’æ›´æ–°ã™ã‚‹ã¨â€¦

* ç„¡é™ãƒ«ãƒ¼ãƒ—ã®é¦™ã‚Šâ™¾ï¸ğŸ˜‡
* â€œã„ã¤ã©ã®é †ã§â€å•é¡ŒãŒçˆ†ç™ºğŸ’¥

> æ›´æ–°ãŒå¿…è¦ãªã‚‰ã€**åˆ¥ã®Commandï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼‰**ã¨ã—ã¦èµ·ã“ã™ã€ãŒå®‰å…¨âœï¸

### ãƒ«ãƒ¼ãƒ«4ï¸âƒ£ï¼šåŒã˜ã‚¤ãƒ™ãƒ³ãƒˆã«ãƒãƒ³ãƒ‰ãƒ©ã¯è¤‡æ•°OKğŸ‰

ã€ŒOrderPaidã€ã«å¯¾ã—ã¦

* ãƒ¬ã‚·ãƒ¼ãƒˆãƒ¡ãƒ¼ãƒ«é€ã‚‹ğŸ“©
* ä¼šè¨ˆãƒ­ã‚°ã‚’æ›¸ãğŸ§¾
* ãƒã‚¤ãƒ³ãƒˆä»˜ä¸ã®å‡¦ç†ã‚’ã‚­ãƒƒã‚¯ğŸ
  ã¿ãŸã„ã« **è¿½åŠ ã™ã‚‹ã ã‘**ã§æ‹¡å¼µã§ãã‚‹âœ¨

### ãƒ«ãƒ¼ãƒ«5ï¸âƒ£ï¼šã‚¤ãƒ™ãƒ³ãƒˆã®é…é€ã¯â€œé…å»¶é…é€â€ãŒåŸºæœ¬â³

ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€**å³æ™‚ã«ãƒãƒ³ãƒ‰ãƒ©ã‚’å‘¼ã°ãš**ã€ã„ã£ãŸã‚“æºœã‚ã¦ãŠã„ã¦
**ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç¢ºå®šã®å‰å¾Œï¼ˆSaveChangesã®å‰å¾Œï¼‰**ã§ã¾ã¨ã‚ã¦é…ã‚‹ã®ãŒå®šç•ªã ã‚ˆğŸ§ âœ¨ ([Microsoft Learn][1])

ï¼ˆã“ã“ã¯æ¬¡ã® Outbox ç« ã«ã‚‚ç¹‹ãŒã‚‹ã‚„ã¤ï¼ğŸ“¤ğŸ’¥ï¼‰

---

## ç½®ãå ´æ‰€ã®ãŠã™ã™ã‚ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼ãƒ¢ãƒãƒªã‚¹å‘ã‘ï¼‰ğŸ ğŸ§©

Orderingãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¾‹ï¼š

* `Modules/Ordering/Domain/Events/`

  * ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆâ€œèµ·ããŸäº‹å®Ÿâ€ï¼‰ã ã‘ç½®ãğŸ””
* `Modules/Ordering/Application/EventHandlers/`

  * ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å¯„ã‚Šï¼‰ğŸ“¦
* `Modules/Ordering/Infrastructure/...`

  * ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãªã©ã®å®Ÿè£…ï¼ˆå¤–éƒ¨I/Oï¼‰ğŸ“©ğŸŒ

---

## æ‰‹ã‚’å‹•ã‹ã™ï¼ˆC#ï¼‰âŒ¨ï¸âœ¨

ï¼ˆä¾‹ï¼šOrderPaid ã‚’å—ã‘ã¦ã€Œãƒ¬ã‚·ãƒ¼ãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ã€ã¨ã€Œç›£æŸ»ãƒ­ã‚°ã€ã‚’è¿½åŠ ã™ã‚‹ã‚ˆğŸ˜Šï¼‰

> ã¡ãªã¿ã«ä»Šã©ãã®å‰æã¨ã—ã¦ã¯ **.NET 10ï¼ˆLTSï¼‰**ãŒæœ€æ–°ã§ã€2025-11-11ãƒªãƒªãƒ¼ã‚¹ï¼†2028-11-14ã¾ã§ã‚µãƒãƒ¼ãƒˆã®è¦‹è¾¼ã¿ã ã‚ˆğŸ“…âœ¨ ([Microsoft][2])
> è¨€èªã¯ **C# 14 ãŒæœ€æ–°**ã§ .NET 10 ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã‚‹ã‚ˆğŸ§ âœ¨ ([Microsoft Learn][3])

---

### 1) ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç”¨æ„ã™ã‚‹ğŸ””

```csharp
namespace Modules.Ordering.Domain.Events;

public interface IDomainEvent
{
    DateTime OccurredAtUtc { get; }
}

public sealed record OrderPaidDomainEvent(
    Guid OrderId,
    Guid CustomerId,
    decimal Amount
) : IDomainEvent
{
    public DateTime OccurredAtUtc { get; } = DateTime.UtcNow;
}
```

---

### 2) é›†ç´„ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’â€œæºœã‚ã‚‹â€ğŸ§ºâœ¨

```csharp
namespace Modules.Ordering.Domain;

using Modules.Ordering.Domain.Events;

public abstract class AggregateRoot
{
    private readonly List<IDomainEvent> _domainEvents = new();
    public IReadOnlyCollection<IDomainEvent> DomainEvents => _domainEvents;

    protected void Raise(IDomainEvent ev) => _domainEvents.Add(ev);
    public void ClearDomainEvents() => _domainEvents.Clear();
}

public sealed class Order : AggregateRoot
{
    public Guid Id { get; private set; }
    public Guid CustomerId { get; private set; }
    public decimal TotalAmount { get; private set; }
    public bool IsPaid { get; private set; }

    public void MarkAsPaid()
    {
        if (IsPaid) return; // ã–ã£ãã‚Šã‚¬ãƒ¼ãƒ‰ï¼ˆè©³ç´°ã¯çŠ¶æ…‹æ©Ÿæ¢°ç« ã§âœ¨ï¼‰
        IsPaid = true;

        Raise(new OrderPaidDomainEvent(Id, CustomerId, TotalAmount));
    }
}
```

---

### 3) ãƒãƒ³ãƒ‰ãƒ©ã®å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½œã‚‹ğŸ§©

MediatR ã¿ãŸã„ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†æ–¹æ³•ã‚‚ã‚ã‚‹ã‘ã©ã€ã¾ãšã¯ **æœ€å°ã®è‡ªå‰**ã§ã„ãã­ğŸ˜Š

```csharp
namespace Modules.SharedKernel.Events;

public interface IDomainEventHandler<in TEvent>
{
    Task Handle(TEvent ev, CancellationToken ct);
}
```

---

### 4) å‰¯ä½œç”¨ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æŠ½è±¡åŒ–ğŸ”Œâœ¨

```csharp
namespace Modules.Ordering.Application.Abstractions;

public interface IEmailSender
{
    Task SendAsync(string to, string subject, string body, CancellationToken ct);
}

public interface IAuditLogger
{
    Task WriteAsync(string message, CancellationToken ct);
}
```

---

### 5) ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’æ›¸ãï¼ˆå‰¯ä½œç”¨ã¯ã“ã“ï¼‰ğŸ“©ğŸ“

#### âœ… ãƒ¬ã‚·ãƒ¼ãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒãƒ³ãƒ‰ãƒ©ğŸ“©

```csharp
namespace Modules.Ordering.Application.EventHandlers;

using Modules.Ordering.Application.Abstractions;
using Modules.Ordering.Domain.Events;
using Modules.SharedKernel.Events;

public sealed class SendReceiptEmailOnOrderPaidHandler
    : IDomainEventHandler<OrderPaidDomainEvent>
{
    private readonly IEmailSender _email;

    public SendReceiptEmailOnOrderPaidHandler(IEmailSender email)
        => _email = email;

    public Task Handle(OrderPaidDomainEvent ev, CancellationToken ct)
    {
        var subject = $"ãŠæ”¯æ‰•ã„ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸ§¾âœ¨ Order: {ev.OrderId}";
        var body = $"åˆè¨ˆ: {ev.Amount} å††\nã„ã¤ã‚‚ã‚ã‚ŠãŒã¨ã†ğŸ˜Š";
        // ã“ã“ã§ã¯ä¾‹ã¨ã—ã¦ to ã‚’å›ºå®šã«ã—ãªã„ã§ã€CustomerIdâ†’ãƒ¡ãƒ¼ãƒ«è§£æ±ºã‚’åˆ¥ã‚µãƒ¼ãƒ“ã‚¹ã«ã—ã¦ã‚‚OKğŸ‘
        return _email.SendAsync("customer@example.com", subject, body, ct);
    }
}
```

#### âœ… ç›£æŸ»ãƒ­ã‚°ãƒãƒ³ãƒ‰ãƒ©ğŸ“

```csharp
namespace Modules.Ordering.Application.EventHandlers;

using Modules.Ordering.Application.Abstractions;
using Modules.Ordering.Domain.Events;
using Modules.SharedKernel.Events;

public sealed class AuditOnOrderPaidHandler
    : IDomainEventHandler<OrderPaidDomainEvent>
{
    private readonly IAuditLogger _audit;

    public AuditOnOrderPaidHandler(IAuditLogger audit)
        => _audit = audit;

    public Task Handle(OrderPaidDomainEvent ev, CancellationToken ct)
        => _audit.WriteAsync($"OrderPaid: order={ev.OrderId} amount={ev.Amount}", ct);
}
```

ğŸ‘†è¦‹ã¦ï¼åŒã˜ã‚¤ãƒ™ãƒ³ãƒˆã« **ãƒãƒ³ãƒ‰ãƒ©2ã¤**ä»˜ã‘ã‚‰ã‚ŒãŸğŸ‰
ã“ã‚ŒãŒã€Œæ©Ÿèƒ½è¿½åŠ ãŒæ€–ããªããªã‚‹ã€ç¬¬ä¸€æ­©ã ã‚ˆã€œğŸ˜†âœ¨

---

### 6) â€œé…é€ä¿‚ï¼ˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ï¼‰â€ã‚’ç”¨æ„ã™ã‚‹ğŸ“¦ğŸšš

æºœã¾ã£ã¦ã„ã‚‹ DomainEvents ã‚’é›†ã‚ã¦ã€è©²å½“ãƒãƒ³ãƒ‰ãƒ©å…¨éƒ¨ã«é…ã‚‹ä¿‚ï¼

```csharp
namespace Modules.SharedKernel.Events;

using Microsoft.Extensions.DependencyInjection;

public interface IDomainEventDispatcher
{
    Task DispatchAsync(IEnumerable<object> domainEvents, CancellationToken ct);
}

public sealed class DomainEventDispatcher : IDomainEventDispatcher
{
    private readonly IServiceProvider _sp;

    public DomainEventDispatcher(IServiceProvider sp) => _sp = sp;

    public async Task DispatchAsync(IEnumerable<object> domainEvents, CancellationToken ct)
    {
        foreach (var ev in domainEvents)
        {
            // ev ã®å‹ã«å¯¾ã™ã‚‹ IDomainEventHandler<T> ã‚’å…¨éƒ¨å–ã‚Šå‡ºã—ã¦é †ç•ªã«å®Ÿè¡Œ
            var handlerType = typeof(IDomainEventHandler<>).MakeGenericType(ev.GetType());
            var handlers = _sp.GetServices(handlerType);

            foreach (var handler in handlers)
            {
                var method = handlerType.GetMethod("Handle")!;
                var task = (Task)method.Invoke(handler, new[] { ev, ct })!;
                await task.ConfigureAwait(false);
            }
        }
    }
}
```

> ç¾å®Ÿã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ MediatR ã‚’ä½¿ã£ã¦åŒã˜ã“ã¨ã‚’ã‚‚ã£ã¨ç¶ºéº—ã«ã™ã‚‹ã“ã¨ã‚‚å¤šã„ã‚ˆğŸ˜Š
> ã§ã‚‚ä»Šã¯ã€Œä»•çµ„ã¿ãŒè…¹è½ã¡ã€ã™ã‚‹ã®ãŒæœ€å„ªå…ˆğŸ‘

---

### 7) ã„ã¤Dispatchã™ã‚‹ã®ï¼Ÿâ³ï¼ˆè¶…é‡è¦ãƒã‚¤ãƒ³ãƒˆï¼‰

ãŠã™ã™ã‚ã¯ã€**SaveChangesã®å‰å¾Œ**ã§ã€Œã¾ã¨ã‚ã¦Dispatchã€ã ã‚ˆâœ¨ ([Microsoft Learn][1])
EF Coreãªã‚‰ SaveChangesInterceptor ã‚’ä½¿ã†ã¨ã€DbContextã‚’æ±šã•ãšã«å·®ã—è¾¼ã‚ã‚‹ã‚ˆã€œğŸ§° ([Microsoft Learn][4])

ï¼ˆã“ã®â€œã‚ºãƒ¬å•é¡Œâ€ãŒæ¬¡ã® Outbox ç« ã®ä¸»å½¹ã«ãªã‚‹ğŸ“¤ğŸ’¥ï¼‰

---

## ãƒŸãƒ‹æ¼”ç¿’ğŸ“âœ¨

1. `OrderPaidDomainEvent` ã«å¯¾ã—ã¦ã€Œãƒã‚¤ãƒ³ãƒˆä»˜ä¸ã€ã‚’è¿½åŠ ã—ã¦ã¿ã‚ˆã†ğŸ

   * `ILoyaltyPointService.AddPoints(customerId, points)` ã¿ãŸã„ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½œã£ã¦
   * ãƒãƒ³ãƒ‰ãƒ©1å€‹è¿½åŠ ã™ã‚‹ã ã‘ã§OKã«ã™ã‚‹ğŸ˜Š

2. ãƒãƒ³ãƒ‰ãƒ©ãŒå¤±æ•—ã—ãŸã¨ãï¼ˆãƒ¡ãƒ¼ãƒ«é€ä¿¡å¤±æ•—ãªã©ï¼‰ã«

   * ä¾‹å¤–ã«ã™ã‚‹ï¼Ÿãƒ­ã‚°ã ã‘ï¼Ÿãƒªãƒˆãƒ©ã‚¤ï¼Ÿ
     ã‚’ã€Œã‚¨ãƒ©ãƒ¼è¨­è¨ˆï¼ˆç¬¬17-18ç« ï¼‰ã€ã®åˆ†é¡ã§è€ƒãˆã¦ã¿ã‚ˆã†ğŸš§âœ¨

---

## ã‚ˆãã‚ã‚‹è½ã¨ã—ç©´âš ï¸ğŸ˜µ

* **ãƒãƒ³ãƒ‰ãƒ©ã®ä¸­ã§DBæ›´æ–°ã‚’å§‹ã‚ã¦ã€åœ°ç„ã®ä¾å­˜ãƒ«ãƒ¼ãƒ—**ã«ãªã‚‹â™»ï¸ğŸ’¥
  â†’ æ›´æ–°ã—ãŸã„ãªã‚‰ â€œåˆ¥ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹â€ ã«åˆ‡ã‚‹âœï¸
* **ãƒãƒ³ãƒ‰ãƒ©ã®é †åºã«ä¾å­˜**ã—ã¡ã‚ƒã†ï¼ˆå…ˆã«ãƒ­ã‚°ã€æ¬¡ã«ãƒ¡ãƒ¼ãƒ«â€¦ã¿ãŸã„ãªå‰æï¼‰
  â†’ ä¾å­˜ã—ãªã„è¨­è¨ˆã«å¯„ã›ã‚‹ï¼ˆé †åºã¯ä¿è¨¼ã—ãªã„æ–¹ãŒå®‰å…¨ï¼‰ğŸ§ 
* **ã‚¤ãƒ™ãƒ³ãƒˆã«æƒ…å ±ã‚’è©°ã‚è¾¼ã¿ã™ãã‚‹**ï¼ˆå·¨å¤§DTOåŒ–ï¼‰ğŸ”
  â†’ ã¾ãšã¯ â€œäº‹å®Ÿâ€ ã«å¿…è¦æœ€å°é™ã ã‘è¼‰ã›ã‚‹ğŸ””

---

## AIæ´»ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹ğŸ¤–âœ¨

* ã€Œ`OrderPaidDomainEvent` ã‚’å—ã‘ã¦ã€ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã™ã‚‹ `IDomainEventHandler<OrderPaidDomainEvent>` ã‚’C#ã§æ›¸ã„ã¦ã€‚å‰¯ä½œç”¨ã¯ `IEmailSender` çµŒç”±ã«ã—ã¦ã€ãƒ†ã‚¹ãƒˆã—ã‚„ã™ãã—ã¦ã€ğŸ“©ğŸ§ª
* ã€ŒåŒã˜ã‚¤ãƒ™ãƒ³ãƒˆã«ç›£æŸ»ãƒ­ã‚°ã‚‚è¿½åŠ ã—ãŸã„ã€‚`IAuditLogger` ã‚’ä½¿ã†ãƒãƒ³ãƒ‰ãƒ©ã‚’è¿½åŠ ã—ã¦ã€‚ä¾å­˜é–¢ä¿‚ãŒå¢—ãˆãªã„ã‚ˆã†ã«ã€ğŸ“ğŸ§©
* ã€ŒDomainã«å‰¯ä½œç”¨ãŒå…¥ã£ã¦ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹è¦³ç‚¹ã‚’ãƒªã‚¹ãƒˆåŒ–ã—ã¦ã€ğŸ”âœ…

---

## ã¾ã¨ã‚ï¼ˆè¦šãˆã‚‹1è¡Œï¼‰ğŸ“Œâœ¨

**ã€Œãƒ‰ãƒ¡ã‚¤ãƒ³ã¯â€œäº‹å®Ÿã‚’å®£è¨€â€ã ã‘ã€‚å‰¯ä½œç”¨ã¯ãƒãƒ³ãƒ‰ãƒ©ã«é€ƒãŒã™ï¼ã€** ğŸ””â¡ï¸ğŸ“©ğŸ§©

---

æ¬¡ã®ç¬¬22ç« ã¯ã€ã“ã®ç« ã§ãƒãƒ©è¦‹ã›ã—ãŸã€ŒDBæ›´æ–°ã¨ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãŒã‚ºãƒ¬ã‚‹å•é¡Œã€ğŸ“¤ğŸ’¥ã‚’ã€Outboxã§å€’ã—ã«è¡Œãã‚ˆã€œï¼ğŸ˜†ğŸ”¥

[1]: https://learn.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/domain-events-design-implementation?utm_source=chatgpt.com "Domain events: Design and implementation - .NET"
[2]: https://dotnet.microsoft.com/ja-jp/platform/support/policy/dotnet-core?utm_source=chatgpt.com ".NET ãŠã‚ˆã³ .NET Core ã®å…¬å¼ã‚µãƒãƒ¼ãƒˆ ãƒãƒªã‚·ãƒ¼"
[3]: https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-14?utm_source=chatgpt.com "What's new in C# 14"
[4]: https://learn.microsoft.com/en-us/ef/core/logging-events-diagnostics/interceptors?utm_source=chatgpt.com "Interceptors - EF Core"
