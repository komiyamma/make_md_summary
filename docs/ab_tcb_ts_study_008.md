# ç¬¬8ç« ï¼šä¸å¤‰æ¡ä»¶ï¼ˆInvariantsï¼‰ã£ã¦çµå±€ãªã«ï¼ŸğŸ”’ğŸ§ 

## 8.1 ä¸å¤‰æ¡ä»¶ã£ã¦ã€ã²ã¨ã“ã¨ã§è¨€ã†ã¨ï¼Ÿâœ¨

ä¸å¤‰æ¡ä»¶ï¼ˆInvariantï¼‰ã¯ã€**ã€Œã©ã‚“ãªæ“ä½œã®å‰å¾Œã§ã‚‚ã€çµ¶å¯¾ã«æˆã‚Šç«‹ã£ã¦ã„ã¦ã»ã—ã„ãƒ«ãƒ¼ãƒ«ã€**ã ã‚ˆğŸ“ğŸ’¡
ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€Œæ ¡å‰‡ã€ã¿ãŸã„ãªã‚‚ã®ğŸ‘®â€â™€ï¸âœ¨

* ç ´ã£ãŸã‚‰â€œã¡ã‚‡ã£ã¨å›°ã‚‹â€ã˜ã‚ƒãªãã¦ã€**ä¸–ç•ŒãŒå£Šã‚Œã‚‹**ã‚„ã¤ğŸ’¥
* ã ã‹ã‚‰ **â€œå®ˆã‚Œã‚‹å½¢â€ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã**ã®ãŒç›®çš„ã ã‚ˆğŸ§±ğŸ”’

---

## 8.2 ä¸å¤‰æ¡ä»¶ãŒå¿…è¦ã«ãªã‚‹â€œäº‹æ•…â€ã‚ã‚‹ã‚ã‚‹ğŸ˜±ğŸ§¨

ãƒŸãƒ‹ECï¼ˆæ³¨æ–‡ğŸ›’ãƒ»åœ¨åº«ğŸ“¦ãƒ»æ”¯æ‰•ã„ğŸ’³ï¼‰ã§ã€ã“ã‚“ãªäº‹æ•…ãŒèµ·ããŒã¡ğŸ‘‡

* åœ¨åº«ãŒãƒã‚¤ãƒŠã‚¹ã«ãªã£ãŸğŸ“‰ğŸ˜±
* åˆè¨ˆé‡‘é¡ãŒã‚ºãƒ¬ãŸï¼ˆæ˜ç´°åˆè¨ˆã¨è«‹æ±‚ãŒé•ã†ï¼‰ğŸ’¸ğŸ’¥
* ã¾ã æ”¯æ‰•ã£ã¦ãªã„ã®ã«å‡ºè·ã•ã‚ŒãŸğŸššğŸ’¨
* äºŒé‡æ±ºæ¸ˆã•ã‚ŒãŸğŸ’³ğŸ’³ğŸ˜‡
* ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿ã€ãªã®ã«æ”¯æ‰•ã„å®Œäº†ã«ãªã£ãŸğŸŒ€

ã“ã†ã„ã†ã®ã£ã¦ã€**â€œãƒ‡ãƒ¼ã‚¿ãŒä¸€ç¬ã§ã‚‚å¤‰ãªçŠ¶æ…‹ã«ãªã£ãŸâ€**ã®ãŒåŸå› ã«ãªã‚Šã‚„ã™ã„ã®ã­ğŸš«ğŸ§ 
ã ã‹ã‚‰ã€Œå¤‰ãªçŠ¶æ…‹ã‚’ä½œã‚‰ã›ãªã„ã€ãŒè¶…å¤§äº‹ğŸ’ªğŸ”’

---

## 8.3 ä¸å¤‰æ¡ä»¶ã¨â€œå…¥åŠ›ãƒã‚§ãƒƒã‚¯â€ã¯åˆ¥ãƒ¢ãƒã ã‚ˆğŸ§¼ğŸ†šğŸ”’

æ··ã–ã‚Šã‚„ã™ã„ã‹ã‚‰ã€ã“ã“ã§ã‚¹ãƒƒã‚­ãƒªåˆ†ã‘ã¡ã‚ƒãŠã†ğŸ˜Šâœ¨

### å…¥åŠ›ãƒã‚§ãƒƒã‚¯ï¼ˆUIãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ğŸ§¼

* æ–‡å­—æ•°ã€å¿…é ˆã€å½¢å¼ï¼ˆãƒ¡ãƒ¼ãƒ«ã®å½¢ğŸ“§ã¨ã‹ï¼‰
* ç”»é¢ã”ã¨ã«éƒ½åˆãŒé•ã†ã“ã¨ã‚‚ã‚ã‚‹
* ã™ã‚ŠæŠœã‘ã‚‹ã“ã¨ãŒã‚ã‚‹ï¼ˆAPIç›´å©ãã€ãƒãƒƒãƒå‡¦ç†ã€ç§»è¡Œãƒ‡ãƒ¼ã‚¿ãªã©ï¼‰ğŸ•³ï¸

### ä¸å¤‰æ¡ä»¶ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ã®æœ€å¾Œã®ç ¦ï¼‰ğŸ”’ğŸ‘‘

* **ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã—ã¦çµ¶å¯¾ã«ãŠã‹ã—ããªã‚‰ãªã„ãƒ«ãƒ¼ãƒ«**
* ã©ã“ã‹ã‚‰æ“ä½œã•ã‚Œã¦ã‚‚ã€**å¿…ãšå®ˆã‚‰ã‚Œã‚‹**å¿…è¦ãŒã‚ã‚‹
* ç ´ã‚‹ãã‚‰ã„ãªã‚‰ã€**æ“ä½œã‚’å¤±æ•—ã•ã›ã‚‹**ï¼ˆä¾‹å¤– or Resultï¼‰ğŸš«

---

## 8.4 ãƒŸãƒ‹ECã€Œæ³¨æ–‡ğŸ›’ã€ã§ä¸å¤‰æ¡ä»¶ã‚’è¦‹ã¤ã‘ã‚‹3ã‚¹ãƒ†ãƒƒãƒ—ğŸ§©âœ¨

ä¸å¤‰æ¡ä»¶ã£ã¦ã€ã‚»ãƒ³ã‚¹ã˜ã‚ƒãªãã¦æ‰‹é †ã§å‡ºã›ã‚‹ã‚ˆğŸ˜ŠğŸ“

1. **ã€ŒãŠã‹ã—ã„çŠ¶æ…‹ã€ã‚’æ—¥æœ¬èªã§è¨€ã†**ğŸ—£ï¸
2. **ã€Œãã‚ŒãŒèµ·ãã‚‹ã¨èª°ãŒå›°ã‚‹ï¼Ÿã€ã‚’è¨€ã†**ğŸ˜µâ€ğŸ’«
3. **ã€Œã ã‹ã‚‰çµ¶å¯¾ã«èµ·ããªã„ã€ã‚’ãƒ«ãƒ¼ãƒ«åŒ–ã™ã‚‹**ğŸ”’

---

## 8.5 æ³¨æ–‡ï¼ˆOrderï¼‰ã®ä¸å¤‰æ¡ä»¶ãƒªã‚¹ãƒˆä¾‹ğŸ“ğŸ”’

ã“ã“ã§ã¯ã€Œæ³¨æ–‡é›†ç´„ã€ã‚’æƒ³å®šã—ã¦ã€ã‚ˆãã‚ã‚‹ä¸å¤‰æ¡ä»¶ã‚’ä¸¦ã¹ã‚‹ã‚ˆğŸ§ºâœ¨
ï¼ˆâ€»ã“ã®â€œå®ˆã‚‹å˜ä½â€ã®è©±ã¯æ¬¡ç« ã§ã‚¬ãƒƒãƒ„ãƒªã‚„ã‚‹ã‚ˆğŸ§ ğŸ§±ï¼‰

### ãŠé‡‘ãƒ»æ•°é‡ã¾ã‚ã‚ŠğŸ’°ğŸ“¦

* é‡‘é¡ã¯ãƒã‚¤ãƒŠã‚¹ç¦æ­¢ğŸš«ğŸ’¸
* æ•°é‡ã¯1ä»¥ä¸Šï¼ˆ0å€‹ã‚„-1å€‹ã¯ãƒŠã‚·ï¼‰ğŸš«ğŸ”¢
* å°è¨ˆï¼å˜ä¾¡Ã—æ•°é‡ï¼ˆã‚ºãƒ¬ãŸã‚‰äº‹æ•…ï¼‰ğŸ§®ğŸ’¥
* åˆè¨ˆï¼æ˜ç´°å°è¨ˆã®åˆè¨ˆï¼ˆå‹æ‰‹ã«æ”¹ã–ã‚“ä¸å¯ï¼‰ğŸ§¾ğŸ”’

### çŠ¶æ…‹é·ç§»ã¾ã‚ã‚ŠğŸ§¾â¡ï¸ğŸ’³â¡ï¸ğŸšš

* **æ”¯æ‰•ã„ï¼ˆPaidï¼‰ã¯ã€æ³¨æ–‡ç¢ºå®šï¼ˆPlacedï¼‰å¾Œã ã‘**âœ…
* **å‡ºè·ï¼ˆShippedï¼‰ã¯ã€æ”¯æ‰•ã„å®Œäº†å¾Œã ã‘**âœ…
* **å‡ºè·å¾Œã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ä¸å¯**ğŸš«
* ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿ã¯æ”¯æ‰•ã„ä¸å¯ğŸš«ğŸ’³

### æ˜ç´°ï¼ˆItemsï¼‰ã¾ã‚ã‚ŠğŸ›’

* æ³¨æ–‡ç¢ºå®šå¾Œã«æ˜ç´°ã‚’å‹æ‰‹ã«ã„ã˜ã‚‰ãªã„ï¼ˆè«‹æ±‚ãŒã‚ºãƒ¬ã‚‹ï¼‰ğŸ§¾ğŸ’¥
* æ³¨æ–‡ç¢ºå®šæ™‚ç‚¹ã§æ˜ç´°ãŒç©ºã¯ãƒ€ãƒ¡ï¼ˆâ€œä½•ã‚‚è²·ã£ã¦ãªã„æ³¨æ–‡â€ï¼‰ğŸŒ€ğŸš«

---

## 8.6 â€œç„¡åŠ¹çŠ¶æ…‹ã‚’ä½œã‚‰ãªã„â€ã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ„3ã¤ğŸ§±ğŸ”’

ã“ã“ã‹ã‚‰ãŒæœ¬ç•ªã ã‚ˆã€œğŸ’ªâœ¨
ä¸å¤‰æ¡ä»¶ã¯ã€Œæ›¸ã„ãŸã€ã ã‘ã˜ã‚ƒå®ˆã‚Œãªã„ã®ã§ã€**å®ˆã‚Œã‚‹å½¢**ã«ã™ã‚‹ï¼

### ã‚³ãƒ„â‘ ï¼šãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ç›´ç½®ãã—ãªã„ï¼ˆVOã§å›²ã†ï¼‰ğŸğŸ’

`number` ã‚„ `string` ã‚’ãã®ã¾ã¾ä½¿ã†ã¨ã€ãƒã‚¤ãƒŠã‚¹é‡‘é¡ã‚‚0å€‹ã‚‚é€šã£ã¡ã‚ƒã†ğŸ˜‡
ãªã®ã§ã€**Money / Quantity** ã¿ãŸã„ãªå°ã•ãªå‹ã§å®ˆã‚‹ğŸ›¡ï¸

```ts
// domain/shared/DomainError.ts
export class DomainError extends Error {
  constructor(message: string) {
    super(message);
    this.name = "DomainError";
  }
}

// domain/shared/invariant.ts
export function invariant(condition: unknown, message: string): asserts condition {
  if (!condition) throw new DomainError(message);
}
```

```ts
// domain/valueObjects/Money.ts
import { invariant } from "../shared/invariant";

export class Money {
  private constructor(private readonly yen: number) {}

  static ofYen(yen: number): Money {
    invariant(Number.isInteger(yen), "é‡‘é¡ã¯æ•´æ•°ï¼ˆå††ï¼‰ã§ã­ğŸª™");
    invariant(yen >= 0, "é‡‘é¡ã¯ãƒã‚¤ãƒŠã‚¹ä¸å¯ã ã‚ˆğŸš«ğŸ’¸");
    return new Money(yen);
  }

  value(): number {
    return this.yen;
  }

  add(other: Money): Money {
    return Money.ofYen(this.yen + other.yen);
  }

  multiply(times: number): Money {
    invariant(Number.isInteger(times), "æ›ã‘ç®—ã®å›æ•°ã¯æ•´æ•°ã§ã­ğŸ”¢");
    invariant(times >= 0, "å›æ•°ãŒãƒã‚¤ãƒŠã‚¹ã¯ãŠã‹ã—ã„ã‚ˆğŸš«");
    return Money.ofYen(this.yen * times);
  }
}
```

```ts
// domain/valueObjects/Quantity.ts
import { invariant } from "../shared/invariant";

export class Quantity {
  private constructor(private readonly n: number) {}

  static of(n: number): Quantity {
    invariant(Number.isInteger(n), "æ•°é‡ã¯æ•´æ•°ã§ã­ğŸ”¢");
    invariant(n >= 1, "æ•°é‡ã¯1ä»¥ä¸Šã ã‚ˆğŸš«");
    return new Quantity(n);
  }

  value(): number {
    return this.n;
  }
}
```

---

### ã‚³ãƒ„â‘¡ï¼šå‹æ‰‹ã«ã„ã˜ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ï¼ˆã‚«ãƒ—ã‚»ãƒ«åŒ–ğŸ“¦ï¼‰

ã€Œitemsé…åˆ—ã‚’å¤–ã«æ¸¡ã—ã¦ã€å¤–ã§pushã•ã‚ŒãŸã€ã¿ãŸã„ãªã®ãŒäº‹æ•…ã®å…¥å£ğŸ˜‡
ãªã®ã§ã€**å¤–ã‹ã‚‰ç›´æ¥ã„ã˜ã‚Œãªã„**ã‚ˆã†ã«ã™ã‚‹ã‚ˆğŸ”’

* ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ `private`
* å¤–ã«å‡ºã™ã¨ãã¯ `readonly`ï¼ˆï¼†å¿…è¦ãªã‚‰ã‚³ãƒ”ãƒ¼ï¼‰ğŸ§Š

---

### ã‚³ãƒ„â‘¢ï¼šæ“ä½œã¯â€œçŠ¶æ…‹é·ç§»ãƒ¡ã‚½ãƒƒãƒ‰â€ã ã‘ã«ã™ã‚‹ğŸšªâœ¨

ã€Œæ”¯æ‰•ã„ã€ã€Œå‡ºè·ã€ã¿ãŸã„ãªæ“ä½œã¯ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ä»£å…¥ã˜ã‚ƒãªãã¦ã€**ãƒ¡ã‚½ãƒƒãƒ‰ã«ã™ã‚‹**ğŸ‘
ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§ä¸å¤‰æ¡ä»¶ã‚’å®ˆã‚Œã‚‹ã‹ã‚‰ã­ğŸ”’ğŸ’ª

```ts
// domain/order/Order.ts
import { Money } from "../valueObjects/Money";
import { Quantity } from "../valueObjects/Quantity";
import { invariant } from "../shared/invariant";

export type OrderStatus = "Draft" | "Placed" | "Paid" | "Shipped" | "Cancelled";

export type OrderItem = Readonly<{
  productId: string;
  unitPrice: Money;
  quantity: Quantity;
}>;

export class Order {
  private status: OrderStatus = "Draft";
  private items: OrderItem[] = [];

  private constructor(private readonly id: string) {}

  static create(id: string): Order {
    invariant(id.trim().length > 0, "æ³¨æ–‡IDãŒç©ºã ã‚ˆğŸš«");
    return new Order(id);
  }

  getId(): string {
    return this.id;
  }

  getStatus(): OrderStatus {
    return this.status;
  }

  getItems(): ReadonlyArray<OrderItem> {
    return this.items; // å¤–ã‹ã‚‰pushã§ããªã„ï¼ˆreadonlyè¿”ã—ï¼‰
  }

  getTotal(): Money {
    return this.items.reduce((sum, item) => {
      const line = item.unitPrice.multiply(item.quantity.value());
      return sum.add(line);
    }, Money.ofYen(0));
  }

  addItem(productId: string, unitPrice: Money, quantity: Quantity): void {
    invariant(this.status === "Draft", "ç¢ºå®šå¾Œã«æ˜ç´°ã¯ã„ã˜ã‚Œãªã„ã‚ˆğŸš«ğŸ§¾");
    invariant(productId.trim().length > 0, "å•†å“IDãŒç©ºã ã‚ˆğŸš«");
    this.items.push({ productId, unitPrice, quantity });
    this.assertInvariants();
  }

  place(): void {
    invariant(this.status === "Draft", "ä»Šã®çŠ¶æ…‹ã ã¨ç¢ºå®šã§ããªã„ã‚ˆğŸš«");
    invariant(this.items.length >= 1, "æ˜ç´°ãŒç©ºã®æ³¨æ–‡ã¯ç¢ºå®šã§ããªã„ã‚ˆğŸš«ğŸ›’");
    this.status = "Placed";
    this.assertInvariants();
  }

  markPaid(): void {
    invariant(this.status === "Placed", "æ”¯æ‰•ã„ã¯æ³¨æ–‡ç¢ºå®šã®å¾Œã ã‚ˆğŸ’³â¡ï¸ğŸ§¾");
    this.status = "Paid";
    this.assertInvariants();
  }

  ship(): void {
    invariant(this.status === "Paid", "å‡ºè·ã¯æ”¯æ‰•ã„å®Œäº†ã®å¾Œã ã‚ˆğŸššğŸ’¨");
    this.status = "Shipped";
    this.assertInvariants();
  }

  cancel(): void {
    invariant(this.status !== "Shipped", "å‡ºè·å¾Œã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§ããªã„ã‚ˆğŸš«ğŸšš");
    invariant(this.status !== "Cancelled", "ã™ã§ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿ã ã‚ˆğŸŒ€");
    this.status = "Cancelled";
    this.assertInvariants();
  }

  private assertInvariants(): void {
    // âœ… çŠ¶æ…‹ã«å¿œã˜ã¦å®ˆã‚‹ãƒ«ãƒ¼ãƒ«ã‚’ã¾ã¨ã‚ã¦ãƒã‚§ãƒƒã‚¯ï¼ˆæ•£ã‚‰ã°ã‚Šé˜²æ­¢ï¼‰
    if (this.status === "Placed" || this.status === "Paid" || this.status === "Shipped") {
      invariant(this.items.length >= 1, "ç¢ºå®šç³»ã®çŠ¶æ…‹ãªã®ã«æ˜ç´°ãŒç©ºã¯ãƒ€ãƒ¡ğŸš«");
    }

    // âœ… åˆè¨ˆé‡‘é¡ãŒãƒã‚¤ãƒŠã‚¹ã«ãªã‚‰ãªã„ï¼ˆMoneyãŒå®ˆã£ã¦ã‚‹ã‘ã©ä¸€å¿œã®ä¾‹ï¼‰
    invariant(this.getTotal().value() >= 0, "åˆè¨ˆãŒãƒã‚¤ãƒŠã‚¹ã¯ã‚ã‚Šãˆãªã„ğŸš«ğŸ’¸");
  }
}
```

---

## 8.7 ãƒ†ã‚¹ãƒˆã§â€œä¸å¤‰æ¡ä»¶ãŒå£Šã‚Œãªã„â€ã‚’å›ºå®šã™ã‚‹ğŸ§ªğŸ”’

ä¸å¤‰æ¡ä»¶ã¯ **ãƒ†ã‚¹ãƒˆã¨ç›¸æ€§ãŒæœ€é«˜**ã ã‚ˆğŸ˜Šâœ¨
ã€Œå£Šã‚ŒãŸã‚‰å³ã‚ã‹ã‚‹ã€ï¼æœªæ¥ã®è‡ªåˆ†ãŒåŠ©ã‹ã‚‹ğŸ¥¹ğŸ«¶

æœ€è¿‘ã¯ Vitest 4.0 ãŒå‡ºã¦ã„ã¦ã€Viteç³»ã¨ç›¸æ€§ã‚ˆãã‚µã‚¯ã‚µã‚¯å›ã›ã‚‹ã‚ˆğŸ§ªâš¡ ([Vitest][1])

```ts
// tests/order.invariants.test.ts
import { describe, it, expect } from "vitest";
import { Order } from "../src/domain/order/Order";
import { Money } from "../src/domain/valueObjects/Money";
import { Quantity } from "../src/domain/valueObjects/Quantity";

describe("Order invariants ğŸ”’", () => {
  it("æ˜ç´°ãŒç©ºã ã¨ç¢ºå®šã§ããªã„ğŸ›’ğŸš«", () => {
    const order = Order.create("o-1");
    expect(() => order.place()).toThrowError();
  });

  it("ç¢ºå®šå¾Œã¯æ˜ç´°ã‚’è¿½åŠ ã§ããªã„ğŸ§¾ğŸš«", () => {
    const order = Order.create("o-2");
    order.addItem("p-1", Money.ofYen(1200), Quantity.of(1));
    order.place();
    expect(() => order.addItem("p-2", Money.ofYen(500), Quantity.of(1))).toThrowError();
  });

  it("æ”¯æ‰•ã„å‰ã«å‡ºè·ã§ããªã„ğŸššğŸš«", () => {
    const order = Order.create("o-3");
    order.addItem("p-1", Money.ofYen(1000), Quantity.of(2));
    order.place();
    expect(() => order.ship()).toThrowError();
  });

  it("åˆè¨ˆãŒæ˜ç´°ã®åˆè¨ˆã«ãªã‚‹ğŸ’°âœ…", () => {
    const order = Order.create("o-4");
    order.addItem("p-1", Money.ofYen(1000), Quantity.of(2)); // 2000
    order.addItem("p-2", Money.ofYen(500), Quantity.of(1));  // 500
    expect(order.getTotal().value()).toBe(2500);
  });
});
```

---

## 8.8 AIæ´»ç”¨ğŸ¤–âœ¨ï¼šä¸å¤‰æ¡ä»¶ã‚’â€œæ¼ã‚Œãªããƒ»å…·ä½“çš„ã«â€ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹

AIã¯ã€Œå€™è£œå‡ºã—ã€ã¨ã€Œäº‹æ•…ã®å…·ä½“åŒ–ã€ãŒè¶…å¾—æ„ã ã‚ˆğŸ§ âš¡
ï¼ˆæœ€å¾Œã«æ±ºã‚ã‚‹ã®ã¯äººé–“ã­ğŸ˜‰ğŸ«¶ï¼‰

### å€™è£œã‚’å¢—ã‚„ã™ğŸ“

* ã€ŒãƒŸãƒ‹ECã®æ³¨æ–‡ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã€ä¸å¤‰æ¡ä»¶å€™è£œã‚’15å€‹ã€‚ç ´ã‚ŒãŸæ™‚ã®äº‹æ•…ä¾‹ã‚‚1è¡Œãšã¤ã¤ã‘ã¦ã€

### ãƒ«ãƒ¼ãƒ«ã®ç²’åº¦ã‚’æ•´ãˆã‚‹ğŸ“

* ã€Œã“ã®ä¸å¤‰æ¡ä»¶ã¯â€œãƒ‰ãƒ¡ã‚¤ãƒ³ä¸å¤‰æ¡ä»¶â€ï¼Ÿãã‚Œã¨ã‚‚â€œå…¥åŠ›ãƒã‚§ãƒƒã‚¯â€ï¼Ÿç†ç”±ã‚‚ã€

### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼é¢¨ã«ç‚¹æ¤œğŸ‘€

* ã€Œã“ã®Orderã‚¯ãƒ©ã‚¹ã®ä¸å¤‰æ¡ä»¶ãŒæŠœã‘ã¦ã‚‹ã¨ã“ã‚ã‚’æŒ‡æ‘˜ã—ã¦ã€`assertInvariants()`ã«è¿½åŠ æ¡ˆã‚’å‡ºã—ã¦ã€

---

## 8.9 ãƒŸãƒ‹ã‚³ãƒ©ãƒ ï¼š2026å¹´ã®TypeScript/Nodeã¾ã‚ã‚Šã®â€œã„ã¾â€ğŸ“°âœ¨

* TypeScript ã¯å…¬å¼ã‚µã‚¤ãƒˆä¸Šã§ **â€œlatest ã¯ 5.9â€** ã¨æ¡ˆå†…ã•ã‚Œã¦ã„ã‚‹ã‚ˆğŸ§· ([typescriptlang.org][2])
* Node.js ã¯ **v24 ãŒ Active LTS**ã€v25 ãŒ Current ã¨ã—ã¦æ›´æ–°ãŒç¶šã„ã¦ã‚‹ã‚ˆğŸŸ©ğŸ†™ ([nodejs.org][3])
* TypeScript ã®ãƒ„ãƒ¼ãƒ«ç¾¤ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ç§»æ¤ã™ã‚‹å‹•ãï¼ˆTypeScript 7 Native Previewï¼‰ã‚‚é€²ã‚“ã§ã„ã¦ã€å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½“é¨“ãŒè‰¯ããªã‚Šãã†ã£ã¦è©±é¡Œã ã‚ˆğŸš€ ([Microsoft Developer][4])

ï¼ˆã“ã®ç« ã®â€œä¸å¤‰æ¡ä»¶â€è‡ªä½“ã¯ã€ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ã¦ã‚‚ä¸€ç”Ÿãƒ¢ãƒã®è€ƒãˆæ–¹ã ã‚ˆğŸ”’âœ¨ï¼‰

---

## 8.10 ã¾ã¨ã‚ğŸ“¦âœ¨

* ä¸å¤‰æ¡ä»¶ã¯ **ã€Œçµ¶å¯¾ã«å£Šã‚Œã¡ã‚ƒãƒ€ãƒ¡ãªãƒ«ãƒ¼ãƒ«ã€**ğŸ”’
* äº‹æ•…ã¯ **â€œä¸€ç¬ã§ã‚‚å¤‰ãªçŠ¶æ…‹ã«ãªã£ãŸâ€** ã¨ã“ã‚ã‹ã‚‰èµ·ãã‚„ã™ã„ğŸ˜±
* å®ˆã‚Šæ–¹ã®åŸºæœ¬ã¯ã“ã‚ŒğŸ‘‡

  * **VOã§å‹ã«é–‰ã˜è¾¼ã‚ã‚‹**ğŸ’
  * **å‹æ‰‹ã«è§¦ã‚Œãªã„ã‚ˆã†ã«ã‚«ãƒ—ã‚»ãƒ«åŒ–**ğŸ“¦
  * **çŠ¶æ…‹é·ç§»ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒã‚§ãƒƒã‚¯**ğŸšª
  * **ãƒ†ã‚¹ãƒˆã§å›ºå®š**ğŸ§ªâœ…

æ¬¡ç« ã¯ã€Œã˜ã‚ƒã‚ã€ãã®ä¸å¤‰æ¡ä»¶ã‚’å®ˆã‚‹â€œã¾ã¨ã¾ã‚Šâ€ã£ã¦ä½•ï¼Ÿã€ï¼ **é›†ç´„ï¼ˆAggregateï¼‰** ã«å…¥ã£ã¦ã„ãã‚ˆğŸ§ºâœ¨

[1]: https://vitest.dev/blog/vitest-4?utm_source=chatgpt.com "Vitest 4.0 is out!"
[2]: https://www.typescriptlang.org/download/?utm_source=chatgpt.com "How to set up TypeScript"
[3]: https://nodejs.org/en/about/previous-releases?utm_source=chatgpt.com "Node.js Releases"
[4]: https://developer.microsoft.com/blog/typescript-7-native-preview-in-visual-studio-2026?utm_source=chatgpt.com "TypeScript 7 native preview in Visual Studio 2026"
