リファクタリングは「1変更1コミット」で小さく進め、Gitの差分（Diff）で動作変更がないことを確認しながら安全に行うフローと、失敗時の復旧手順。