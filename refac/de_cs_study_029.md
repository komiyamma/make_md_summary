# ç¬¬29ç«  ãƒ†ã‚¹ãƒˆâ‘¢ï¼šçµ±åˆãƒ†ã‚¹ãƒˆï¼ˆDIæ§‹æˆã§é€šã—ç¢ºèªï¼‰ğŸ§©ğŸ

## ã“ã®ç« ã®ã‚´ãƒ¼ãƒ«ğŸ¯âœ¨

çµ±åˆãƒ†ã‚¹ãƒˆã§ã€æ¬¡ã®ã€Œã¤ãªãŒã‚Šã€ã‚’**ã¾ã¨ã‚ã¦**ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ğŸ™‚ğŸ”—

* DIç™»éŒ²ãŒæ­£ã—ã„ï¼ˆè§£æ±ºã§ãã‚‹ï¼‰ğŸ§°âœ…
* ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè¡Œ â†’ é›†ç´„ã®çŠ¶æ…‹å¤‰æ›´ â†’ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿ ğŸ””
* ã‚¤ãƒ™ãƒ³ãƒˆãŒãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã•ã‚Œã¦ã€**ãƒãƒ³ãƒ‰ãƒ©ãŒã¡ã‚ƒã‚“ã¨å‹•ã**ğŸ“£â¡ï¸ğŸ¯
* ã€Œç™»éŒ²ãƒŸã‚¹ã€ã€Œé…ä¿¡æ¼ã‚Œã€ã‚’ãƒ†ã‚¹ãƒˆã§æ—©æœŸç™ºè¦‹ğŸ”ğŸ’¥

> çµ±åˆãƒ†ã‚¹ãƒˆã¯ã€å˜ä½“ãƒ†ã‚¹ãƒˆã‚ˆã‚Šåºƒãã€è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä¸€ç·’ã«å‹•ãã“ã¨ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆã§ã™ğŸ™‚ ([Microsoft Learn][1])

---

## çµ±åˆãƒ†ã‚¹ãƒˆã¯â€œã“ã“ã¾ã§â€ã‚„ã‚‹ï¼ˆã‚„ã‚Šã™ãé˜²æ­¢ï¼‰ğŸš§ğŸ˜‡

çµ±åˆãƒ†ã‚¹ãƒˆã¯ã€å…¨éƒ¨ã‚’ç¶²ç¾…ã—ãªãã¦OKã§ã™ã€‚**é‡è¦ãªå°‘æ•°ã‚±ãƒ¼ã‚¹**ã«çµã‚‹ã®ãŒã‚³ãƒ„ğŸ™‚âœ¨

### 3æ®µéšã®ã†ã¡ã€ã¾ãšã¯çœŸã‚“ä¸­ã‚’ç‹™ã†ğŸ¯

1. **å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆç¬¬27ç« ï¼‰**ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³ãŒã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡ºã™ã‹ğŸ§ªğŸ””
2. **ãƒãƒ³ãƒ‰ãƒ©å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆç¬¬28ç« ï¼‰**ï¼šãƒãƒ³ãƒ‰ãƒ©ãŒå‰¯ä½œç”¨ã‚’èµ·ã“ã™ã‹ğŸ§ªğŸ­
3. **çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆç¬¬29ç« ï¼‰**ï¼š**DI + ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã®é…ç·š**ãŒå…¨éƒ¨ã¤ãªãŒã‚‹ã‹ğŸ§©ğŸ â† ä»Šã“ã“ï¼

---

## ä»Šå›ã®ã€Œæœ€å°E2Eã€ã‚·ãƒŠãƒªã‚ªğŸ›’ğŸ’³ğŸ“¦

**æ³¨æ–‡ã‚’æ”¯æ‰•ã†**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’é€šã—ã¦ã€ã‚¤ãƒ™ãƒ³ãƒˆé…ä¿¡ã¾ã§ç¢ºèªã—ã¾ã™ğŸ™‚

1. `PayOrder`ï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼‰ã‚’å‘¼ã¶ğŸ“£
2. `Order.MarkAsPaid()` ãŒçŠ¶æ…‹å¤‰æ›´ï¼† `OrderPaid` ã‚’æºœã‚ã‚‹ğŸ””
3. ãƒªãƒã‚¸ãƒˆãƒªä¿å­˜âœ…
4. ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãŒ `OrderPaidHandler` ã‚’å‘¼ã¶ğŸ“£â¡ï¸ğŸ¯
5. ãƒãƒ³ãƒ‰ãƒ©ãŒãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼ˆãƒ†ã‚¹ãƒˆã§ã¯ãƒ•ã‚§ã‚¤ã‚¯ã§è¨˜éŒ²ï¼‰ğŸ“§âœ…

---

## ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæº–å‚™ï¼ˆxUnit v3ï¼‰ğŸ§ªâœ¨

2026æ™‚ç‚¹ã§ã¯ **.NET 10ï¼ˆLTSï¼‰** ãŒç¾è¡Œã®åœŸå°ã¨ã—ã¦æ‰±ã„ã‚„ã™ã„ã§ã™ğŸ™‚ï¼ˆLTSã®ã‚µãƒãƒ¼ãƒˆæœŸé–“ã‚‚æ˜ç¤ºã•ã‚Œã¦ã„ã¾ã™ï¼‰ ([Microsoft for Developers][2])
ã¾ãŸã€xUnit ã¯ **v3 ãŒæ¨å¥¨**ã§ã€æ—§ `xunit` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ â€œlegacyâ€ æ‰±ã„ã¨ã—ã¦ deprecate è¡¨ç¤ºã«ãªã£ã¦ã„ã¾ã™ã€‚([NuGet][3])

### `*.IntegrationTests.csproj` ä¾‹ï¼ˆnet10.0ï¼‰ğŸ§©

```xml
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <IsPackable>false</IsPackable>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.*" />
    <PackageReference Include="xunit.v3" Version="3.*" />
    <PackageReference Include="xunit.runner.visualstudio" Version="3.*" />
  </ItemGroup>

  <ItemGroup>
    <!-- ã‚¢ãƒ—ãƒªå´ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚ç…§ï¼ˆä¾‹ï¼‰ -->
    <ProjectReference Include="..\MiniEc.Application\MiniEc.Application.csproj" />
    <ProjectReference Include="..\MiniEc.Infrastructure\MiniEc.Infrastructure.csproj" />
  </ItemGroup>

</Project>
```

* xUnit v3 ã¯ `.NET 8+` ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ ([NuGet][4])
* Visual Studio ã® Test Explorer ã§å‹•ã‹ã™ãŸã‚ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãŒ `xunit.runner.visualstudio` ã§ã€v3 ã®ãƒ†ã‚¹ãƒˆã‚‚å®Ÿè¡Œã§ãã¾ã™ã€‚ ([NuGet][5])

---

## ã¾ãšå¤§äº‹ï¼šDIæ§‹æˆã‚’â€œãƒ†ã‚¹ãƒˆã§ä½¿ã„å›ã›ã‚‹å½¢â€ã«ã™ã‚‹ğŸ§©ğŸ§°

çµ±åˆãƒ†ã‚¹ãƒˆã¯ã€Œæœ¬ç•ªã¨åŒã˜DIç™»éŒ²ã€ã‚’ä½¿ã‚ãªã„ã¨æ„å‘³ãŒè–„ããªã‚ŠãŒã¡ã§ã™ğŸ™‚
ãªã®ã§ **DIç™»éŒ²ã‚’æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰ã«å¯„ã›ã‚‹**ã®ãŒé‰„æ¿ã§ã™âœ¨

### ä¾‹ï¼šã‚¢ãƒ—ãƒªå´ã«ã“ã†ã„ã†ç™»éŒ²ã‚’ç”¨æ„ã—ã¦ãŠãğŸ—ï¸

```csharp
using Microsoft.Extensions.DependencyInjection;

public static class ServiceRegistration
{
    public static IServiceCollection AddApplication(this IServiceCollection services)
    {
        // ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆä¾‹ï¼‰
        services.AddScoped<PayOrderUseCase>();

        // ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£
        services.AddScoped<IDomainEventDispatcher, DomainEventDispatcher>();

        // ãƒãƒ³ãƒ‰ãƒ©ç™»éŒ²ï¼ˆä¾‹ï¼‰
        services.AddScoped<IDomainEventHandler<OrderPaid>, OrderPaidSendMailHandler>();

        return services;
    }

    public static IServiceCollection AddInfrastructure(this IServiceCollection services)
    {
        // ã“ã“ã§ã¯æœ¬ç•ªç”¨ã®DB/ãƒ¡ãƒ¼ãƒ«ç­‰ã‚’ç™»éŒ²ã™ã‚‹æƒ³å®š
        services.AddScoped<IOrderRepository, EfOrderRepository>();
        services.AddScoped<IEmailSender, SmtpEmailSender>();

        return services;
    }
}
```

ğŸ’¡ çµ±åˆãƒ†ã‚¹ãƒˆã§ã¯ `AddInfrastructure()` ã®ä¸€éƒ¨ã ã‘ **ãƒ†ã‚¹ãƒˆç”¨ã«å·®ã—æ›¿ãˆã‚‹**ã®ãŒã‚ˆãã‚ã‚‹å½¢ã§ã™ğŸ™‚ğŸ­

---

## ãƒ†ã‚¹ãƒˆç”¨ã®å·®ã—æ›¿ãˆéƒ¨å“ï¼ˆãƒ•ã‚§ã‚¤ã‚¯ï¼‰ğŸ­ğŸ“§

ã€Œæœ¬ç•ªãƒ¡ãƒ¼ãƒ«é€ä¿¡ã€ã¯çµ±åˆãƒ†ã‚¹ãƒˆã§ã‚„ã‚‰ãªã„ã»ã†ãŒå®‰å…¨ã§ã™ğŸ˜‡
ä»£ã‚ã‚Šã«**é€ã£ãŸè¨˜éŒ²ã ã‘æ®‹ã™**ãƒ•ã‚§ã‚¤ã‚¯ã‚’ä½¿ã„ã¾ã™ğŸ“®âœ¨

### ãƒ•ã‚§ã‚¤ã‚¯ EmailSenderï¼ˆé€ä¿¡å±¥æ­´ã‚’ä¿æŒï¼‰ğŸ“§ğŸ“

```csharp
public sealed class FakeEmailSender : IEmailSender
{
    private readonly List<(string To, string Subject, string Body)> _sent = new();
    public IReadOnlyList<(string To, string Subject, string Body)> Sent => _sent;

    public Task SendAsync(string to, string subject, string body, CancellationToken ct = default)
    {
        _sent.Add((to, subject, body));
        return Task.CompletedTask;
    }
}
```

### ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒª OrderRepositoryï¼ˆDBã®ä»£ã‚ã‚Šï¼‰ğŸ—ƒï¸âœ¨

```csharp
public sealed class InMemoryOrderRepository : IOrderRepository
{
    private readonly Dictionary<Guid, Order> _store = new();

    public Task<Order?> FindAsync(Guid orderId, CancellationToken ct = default)
        => Task.FromResult(_store.TryGetValue(orderId, out var o) ? o : null);

    public Task SaveAsync(Order order, CancellationToken ct = default)
    {
        _store[order.Id] = order;
        return Task.CompletedTask;
    }

    // ãƒ†ã‚¹ãƒˆç”¨ï¼šäº‹å‰æŠ•å…¥
    public void Seed(Order order) => _store[order.Id] = order;
}
```

---

## çµ±åˆãƒ†ã‚¹ãƒˆæœ¬ä½“ï¼šDIã§çµ„ã‚“ã§ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’é€šã™ğŸ§©ğŸ

ãƒã‚¤ãƒ³ãƒˆã¯ã“ã‚Œã§ã™ğŸ‘‡ğŸ™‚âœ¨

* `ServiceCollection` ã« **æœ¬ç•ªç›¸å½“ã®ç™»éŒ²**ã‚’å…¥ã‚Œã‚‹
* å¤–éƒ¨I/Oã ã‘ãƒ•ã‚§ã‚¤ã‚¯ã«å·®ã—æ›¿ãˆã‚‹
* **ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’å‘¼ã‚“ã§**ã€å‰¯ä½œç”¨ï¼ˆãƒãƒ³ãƒ‰ãƒ©å‹•ä½œï¼‰ã¾ã§ç¢ºèªã™ã‚‹

### çµ±åˆãƒ†ã‚¹ãƒˆä¾‹ï¼ˆxUnit v3ï¼‰ğŸ§ªğŸ””

```csharp
using Microsoft.Extensions.DependencyInjection;
using Xunit;

public sealed class DomainEventsIntegrationTests
{
    [Fact]
    public async Task PayOrder_Dispatches_OrderPaid_And_HandlerRuns()
    {
        // 1) DIã‚’çµ„ã‚€ğŸ§©
        var services = new ServiceCollection();

        services.AddApplication();
        services.AddInfrastructure();

        // 2) å¤–éƒ¨I/Oã‚’ãƒ†ã‚¹ãƒˆç”¨ã«å·®ã—æ›¿ãˆğŸ­
        var fakeEmail = new FakeEmailSender();
        var inMemoryRepo = new InMemoryOrderRepository();

        services.AddSingleton<IEmailSender>(fakeEmail);
        services.AddSingleton<IOrderRepository>(inMemoryRepo);

        // validateScopes: true ã§ã€Œã‚¹ã‚³ãƒ¼ãƒ—ä¸æ•´åˆã€ã‚‚æ—©æœŸã«è½ã¨ã™ğŸ§¨
        using var provider = services.BuildServiceProvider(validateScopes: true);

        // 3) ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ğŸ›’
        var order = Order.PlaceNew(
            id: Guid.NewGuid(),
            customerEmail: "alice@example.com",
            total: Money.Yen(1200)
        );
        inMemoryRepo.Seed(order);

        // 4) ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè¡ŒğŸ“£
        var useCase = provider.GetRequiredService<PayOrderUseCase>();
        await useCase.ExecuteAsync(order.Id);

        // 5) æœŸå¾…çµæœï¼ˆçŠ¶æ…‹ï¼‰âœ…
        var saved = await inMemoryRepo.FindAsync(order.Id);
        Assert.NotNull(saved);
        Assert.True(saved!.IsPaid);

        // 6) æœŸå¾…çµæœï¼ˆãƒãƒ³ãƒ‰ãƒ©å‰¯ä½œç”¨ï¼‰ğŸ“§âœ…
        Assert.Single(fakeEmail.Sent);
        Assert.Contains("æ”¯æ‰•ã„", fakeEmail.Sent[0].Subject);
    }
}
```

---

## ã‚‚ã†1æœ¬ã ã‘ï¼šDIç™»éŒ²ãƒŸã‚¹ã‚’å³æ­»ã•ã›ã‚‹ã€Œè§£æ±ºãƒ†ã‚¹ãƒˆã€ğŸ’¥ğŸ§°

ã€Œã‚¤ãƒ™ãƒ³ãƒˆè‡ªä½“ã¯å‡ºã¦ã‚‹ã®ã«ã€ãƒãƒ³ãƒ‰ãƒ©ãŒç™»éŒ²ã•ã‚Œã¦ãªãã¦å‹•ã‹ãªã„â€¦ã€
ã“ã‚Œã€**ã‚ã‚‹ã‚ã‚‹**ã§ã™ğŸ˜µâ€ğŸ’«

ãã“ã§ã€**ä»£è¡¨ã‚µãƒ¼ãƒ“ã‚¹ãŒè§£æ±ºã§ãã‚‹ã“ã¨**ã‚’ãƒ†ã‚¹ãƒˆã§å›ºå®šã—ã¾ã™ğŸ™‚âœ¨

```csharp
using Microsoft.Extensions.DependencyInjection;
using Xunit;

public sealed class DiWiringTests
{
    [Fact]
    public void ServiceProvider_CanResolve_KeyServices()
    {
        var services = new ServiceCollection();
        services.AddApplication();

        using var provider = services.BuildServiceProvider(validateScopes: true);

        // â€œé…ç·šã®è¦â€ã‚’è§£æ±ºã§ãã‚‹ã‹ç¢ºèªğŸ§©
        Assert.NotNull(provider.GetRequiredService<PayOrderUseCase>());
        Assert.NotNull(provider.GetRequiredService<IDomainEventDispatcher>());
    }
}
```

ã“ã®1æœ¬ãŒã‚ã‚‹ã ã‘ã§ã€**DIç™»éŒ²æ¼ã‚Œ**ãŒã‹ãªã‚Šæ¸›ã‚Šã¾ã™ğŸ™‚ğŸ§¯

---

## ã‚ˆãã‚ã‚‹äº‹æ•…ãƒã‚¤ãƒ³ãƒˆï¼ˆã“ã“ã‚’è¦‹ã‚Œã°ã ã„ãŸã„ç›´ã‚‹ï¼‰ğŸ§¯ğŸ˜‡

### äº‹æ•…â‘ ï¼šã‚¤ãƒ™ãƒ³ãƒˆã¯æºœã¾ã£ã¦ã‚‹ã®ã«ã€é…ä¿¡ã•ã‚Œãªã„ğŸ“®âŒ

* ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å´ã§ã€Œä¿å­˜å¾Œã« Dispatchã€ã‚’å‘¼ã³å¿˜ã‚ŒğŸ™ƒ
* ä¾‹ï¼š`repository.SaveAsync(order); dispatcher.Dispatch(order.DomainEvents);` ãŒæŠœã‘ã¦ã‚‹

âœ… å¯¾ç­–ï¼šçµ±åˆãƒ†ã‚¹ãƒˆã§ã€Œãƒãƒ³ãƒ‰ãƒ©ã®å‰¯ä½œç”¨ã€ã‚’å¿…ãšæ¤œè¨¼ğŸ“§âœ…

### äº‹æ•…â‘¡ï¼šãƒãƒ³ãƒ‰ãƒ©ãŒå‹•ã‹ãªã„ï¼ˆç™»éŒ²æ¼ã‚Œï¼‰ğŸ§©âŒ

* `IDomainEventHandler<OrderPaid>` ã‚’DIç™»éŒ²ã—ã¦ãªã„
* åå‰ç©ºé–“é•ã„ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚ç…§æ¼ã‚Œâ€¦ãªã©

âœ… å¯¾ç­–ï¼šä¸Šã®ã€Œè§£æ±ºãƒ†ã‚¹ãƒˆã€ã‚’ç½®ãğŸ’¥ğŸ§°

### äº‹æ•…â‘¢ï¼šSingletonãŒScopedã‚’æŠ±ãˆã¦çˆ†ç™ºğŸ’£

* `BuildServiceProvider(validateScopes: true)` ã‚’ä½¿ã†ã¨ã€æ—©ã‚ã«è½ã¡ã¦ãã‚Œã¦åŠ©ã‹ã‚Šã¾ã™ğŸ™‚ğŸ§¨

---

## çµ±åˆãƒ†ã‚¹ãƒˆã®â€œæ•°â€ã®ç›®å®‰ï¼ˆè¿·ã£ãŸã‚‰ã“ã‚Œï¼‰ğŸ“ğŸ™‚

* **Happy Path 1ã€œ3æœ¬**ï¼ˆæœ€é‡è¦ã®æµã‚Œã ã‘ï¼‰ğŸ
* **å¤±æ•—ç³» 1æœ¬**ï¼ˆãƒ¡ãƒ¼ãƒ«å¤±æ•—ã§ã‚‚æ³¨æ–‡ã¯æˆåŠŸæ‰±ã„ï¼Ÿãªã©ï¼‰ğŸ’¥ğŸ“§
* ãã‚Œä»¥ä¸Šã¯ã€å˜ä½“ãƒ†ã‚¹ãƒˆã«å¯„ã›ã¦å¢—ã‚„ã™ã»ã†ãŒã‚³ã‚¹ãƒ‘è‰¯ã„ã“ã¨ãŒå¤šã„ã§ã™ğŸ™‚âœ¨

---

## ï¼ˆç™ºå±•ï¼‰DBã‚‚æœ¬ç‰©ã§ã‚„ã‚ŠãŸããªã£ãŸã‚‰ï¼šTestcontainers ğŸ³ğŸ§ª

ã€ŒDBã®æ–¹è¨€ã€ã€ŒEFã®ãƒãƒƒãƒ”ãƒ³ã‚°ã€ã¾ã§å«ã‚ã¦å®‰å¿ƒã—ãŸã„å ´åˆã¯ã€Dockerä¸Šã«æœ¬ç‰©DBã‚’ç«‹ã¦ã¦çµ±åˆãƒ†ã‚¹ãƒˆã™ã‚‹æ‰‹ã‚‚ã‚ã‚Šã¾ã™ğŸ™‚
Testcontainers ã‚’ä½¿ã†ã¨ã€ãƒ†ã‚¹ãƒˆä¸­ã ã‘ã‚³ãƒ³ãƒ†ãƒŠã‚’ç«‹ã¦ã¦ã€çµ‚ã‚ã£ãŸã‚‰ç‰‡ä»˜ã‘ã‚‰ã‚Œã¾ã™ğŸ§¹âœ¨ ([Microsoft for Developers][6])

---

## AIæ‹¡å¼µã«ãŠé¡˜ã„ã™ã‚‹ã¨å¼·ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹ğŸ¤–ğŸ§ âœ¨

* ã€Œã“ã®DIç™»éŒ²ï¼ˆServiceCollectionï¼‰ã‹ã‚‰ã€çµ±åˆãƒ†ã‚¹ãƒˆç”¨ã® `BuildServiceProvider(validateScopes: true)` ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ä½œã£ã¦ã€ğŸ§©
* ã€Œ`PayOrderUseCase` ã®çµ±åˆãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã€‚å¤–éƒ¨I/Oã¯ãƒ•ã‚§ã‚¤ã‚¯ã«ã—ã¦ã€å‰¯ä½œç”¨ã‚’ã‚¢ã‚µãƒ¼ãƒˆã—ã¦ã€ğŸ§ªğŸ“§
* ã€Œçµ±åˆãƒ†ã‚¹ãƒˆãŒè½ã¡ãŸã€‚ä¾‹å¤–ãƒ­ã‚°ã‹ã‚‰â€œDIç™»éŒ²æ¼ã‚Œâ€ã‹â€œã‚¹ã‚³ãƒ¼ãƒ—ä¸æ•´åˆâ€ã‹åˆ‡ã‚Šåˆ†ã‘ã¦ã€ğŸ”ğŸ§¯

---

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆâœ…ğŸ“

* [ ] çµ±åˆãƒ†ã‚¹ãƒˆã¯ã€ŒDI + ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒé…ç·šã€ã‚’ç¢ºèªã™ã‚‹ğŸ§©ğŸ””
* [ ] å¤–éƒ¨I/Oã¯ãƒ•ã‚§ã‚¤ã‚¯ã«ã—ã¦ã€é€Ÿããƒ»å®‰å…¨ã«ğŸƒâ€â™€ï¸ğŸ’¨
* [ ] `validateScopes: true` ã§ â€œåœ°é›·â€ ã‚’æ—©æœŸçˆ†ç™ºã•ã›ã‚‹ğŸ§¨
* [ ] **å°‘æ•°ã®é‡è¦ã‚±ãƒ¼ã‚¹**ã ã‘ã«çµã‚‹ğŸ™‚ğŸ¯
* [ ] ãƒãƒ³ãƒ‰ãƒ©å‰¯ä½œç”¨ï¼ˆä¾‹ï¼šãƒ¡ãƒ¼ãƒ«é€ä¿¡ã®è¨˜éŒ²ï¼‰ã¾ã§å¿…ãšè¦‹ã‚‹ğŸ“§âœ…

---

æ¬¡ç« ã§ã¯ã€Œå–ã‚Šã“ã¼ã—å•é¡Œï¼ˆæ°¸ç¶šåŒ–ãŒå¿…è¦ã«ãªã‚‹ç†ç”±ï¼‰ã€ã«é€²ã¿ã¾ã™ğŸ˜±ğŸ“¦

[1]: https://learn.microsoft.com/en-us/aspnet/core/test/integration-tests?view=aspnetcore-10.0&utm_source=chatgpt.com "Integration tests in ASP.NET Core"
[2]: https://devblogs.microsoft.com/dotnet/announcing-dotnet-10/?utm_source=chatgpt.com "Announcing .NET 10"
[3]: https://www.nuget.org/packages/xunit?utm_source=chatgpt.com "xunit 2.9.3"
[4]: https://www.nuget.org/packages/xunit.v3?utm_source=chatgpt.com "xunit.v3 3.2.2"
[5]: https://www.nuget.org/packages/xunit.runner.visualstudio?utm_source=chatgpt.com "xunit.runner.visualstudio 3.1.5"
[6]: https://devblogs.microsoft.com/ise/testing-with-testcontainers/?utm_source=chatgpt.com "Integration Testing with Testcontainers - ISE Developer Blog"
